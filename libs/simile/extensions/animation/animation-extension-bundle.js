

/* animation-facet.js */
Exhibit.AnimationFacet=function(B,A){this._div=B;
this._uiContext=A;
this._expression=null;
this._mode=Exhibit.AnimationFacet.MODE_NONE;
this._listModePeriods=null;
this._listModeCurrentPeriods=[];
this._rangeModePrecision=null;
this._rangeModeMaxRange={min:null,max:null};
this._rangeModeCurrentRange={min:null,max:null};
this._dateModeInterval=null;
this._settings={};
this._ui=null;
};
Exhibit.AnimationFacet.DAY="day";
Exhibit.AnimationFacet.MONTH="month";
Exhibit.AnimationFacet.YEAR="year";
Exhibit.AnimationFacet.MODE_NONE=0;
Exhibit.AnimationFacet.MODE_LIST=1;
Exhibit.AnimationFacet.MODE_RANGE=2;
Exhibit.AnimationFacet.MODE_DATE=3;
Exhibit.AnimationFacet.DEBUG1=false;
Exhibit.AnimationFacet.PLAY_PNG="iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wDGw42NiWo9VwAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAADtJREFUKM+VjzEKACAAAu+i/3+5lpYgQgU3DxVgHUfyEbYFvqDBHFvgAhsAgEGpWWRNAdMG00mmH0yObCp4Bx5kUSOtAAAAAElFTkSuQmCC";
Exhibit.AnimationFacet.PAUSE_PNG="iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wDGw43G3lsmGgAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAB1JREFUKM9jZGBg+M+ACRihNIYcEwOJYFTDSNEAAI/YAhcjCBZEAAAAAElFTkSuQmCC";
Exhibit.AnimationFacet._getNextAnimationUnique=function(){if(!Exhibit.AnimationFacet._animationCounter){Exhibit.AnimationFacet._animationCounter=0;
}var A=Exhibit.AnimationFacet._animationCounter;
Exhibit.AnimationFacet._animationCounter++;
return A;
};
Exhibit.AnimationFacet._settingSpecs={"facetLabel":{type:"text"},"showLabel":{type:"boolean",defaultValue:true},"type":{type:"text",defaultValue:"default"},"width":{type:"text"},"height":{type:"text"},"formatter":{type:"text",defaultValue:null},"startTime":{type:"int",defaultValue:0},"duration":{type:"int",defaultValue:60}};
Exhibit.AnimationFacet.create=function(D,B,A){if(Exhibit.AnimationFacet.DEBUG1){console.log("create",D,B,A);
}var A=Exhibit.UIContext.create(D,A);
var C=new Exhibit.AnimationFacet(B,A);
Exhibit.AnimationFacet._configure(C,D);
C._initializeUI();
A.getCollection().addFacet(C);
return C;
};
Exhibit.AnimationFacet.createFromDOM=function(configElmt,containerElmt,uiContext){if(Exhibit.AnimationFacet.DEBUG1){console.log("createFromDOM",configElmt,containerElmt,uiContext);
}var uiContext=Exhibit.UIContext.createFromDOM(configElmt,uiContext);
var facet=new Exhibit.AnimationFacet(containerElmt!=null?containerElmt:configElmt,uiContext);
Exhibit.SettingsUtilities.collectSettingsFromDOM(configElmt,Exhibit.AnimationFacet._settingSpecs,facet._settings);
try{var expressionString=Exhibit.getAttribute(configElmt,"expression");
if(expressionString!=null&&expressionString.length>0){facet._expression=Exhibit.ExpressionParser.parse(expressionString);
}if(facet._expression==null){SimileAjax.Debug.exception(e2,"AnimationFacet: no expression specified; using .label");
facet._expression=".label";
}var selections=Exhibit.getAttribute(configElmt,"selections");
if(selections!=null&&selections.length>0){try{facet._listModePeriods=eval(selections);
facet._mode=Exhibit.AnimationFacet.MODE_LIST;
}catch(e2){SimileAjax.Debug.exception(e2,"AnimationFacet: Selections needs to be valid JSON structure");
}}else{try{var sequence=Exhibit.getAttribute(configElmt,"selectionSequence");
var dur=facet._settings.duration;
if(!dur){dur=60;
}if(sequence!=null&&sequence.length>0){var a=sequence.split(",");
var b=[];
var d=Math.floor(dur/a.length);
for(var i=0;
i<a.length;
i++){b.push({from:i*d,to:i*d+d,select:[$.trim(a[i])]});
}}facet._listModePeriods=b;
facet._mode=Exhibit.AnimationFacet.MODE_LIST;
}catch(e2){SimileAjax.Debug.exception(e2,"AnimationFacet: Selection sequence or duration is invalid");
}}var precision=Exhibit.getAttribute(configElmt,"precision");
if(precision!=null&&precision.length>0){try{facet._rangeModePrecision=parseInt(precision);
facet._mode=Exhibit.AnimationFacet.MODE_RANGE;
}catch(e2){SimileAjax.Debug.exception(e2,"AnimationFacet: Precision needs to be integer");
}}var datePrecision=Exhibit.getAttribute(configElmt,"datePrecision");
if(datePrecision!=null&&datePrecision.length>0){try{var arr=[Exhibit.AnimationFacet.DAY,Exhibit.AnimationFacet.MONTH,Exhibit.AnimationFacet.YEAR];
for(var i=0;
i<arr.length;
i++){if(datePrecision.toLowerCase()==arr[i]){facet._dateModeInterval=arr[i];
facet._mode=Exhibit.AnimationFacet.MODE_DATE;
}}}catch(e2){SimileAjax.Debug.exception(e2,"AnimationFacet: Date precision needs to be year, month or day");
}}if(facet._mode==Exhibit.AnimationFacet.MODE_NONE){SimileAjax.Debug.exception(e2,"AnimationFacet: need to define either ex:selections, ex:precision or ex:datePrecision");
}}catch(e){SimileAjax.Debug.exception(e,"AnimationFacet: Error processing configuration of animation facet");
}Exhibit.AnimationFacet._configure(facet);
facet._initializeUI();
uiContext.getCollection().addFacet(facet);
return facet;
};
Exhibit.AnimationFacet._configure=function(facet,configuration){if(Exhibit.AnimationFacet.DEBUG1){console.log("_configure",facet,configuration);
}if(!("facetLabel" in facet._settings)){facet._settings.facetLabel="Animation facet";
if(facet._expression!=null&&facet._expression.isPath()){var segment=facet._expression.getPath().getLastSegment();
var property=facet._uiContext.getDatabase().getProperty(segment.property);
if(property!=null){facet._settings.facetLabel=segment.forward?property.getLabel():property.getReverseLabel();
}}}if("formatter" in facet._settings){var formatter=facet._settings.formatter;
if(formatter!=null&&formatter.length>0){try{facet._formatter=eval(formatter);
}catch(e){SimileAjax.Debug.log(e);
}}}if(facet._mode==Exhibit.AnimationFacet.MODE_LIST){facet._cache=new Exhibit.FacetUtilities.Cache(facet._uiContext.getDatabase(),facet._uiContext.getCollection(),facet._expression);
}else{if(facet._mode==Exhibit.AnimationFacet.MODE_RANGE){var r;
var database=facet._uiContext.getDatabase();
if(facet._expression.getPath()){var path=facet._expression.getPath();
var propertyID=path.getLastSegment().property;
var property=database.getProperty(propertyID);
r=property.getRangeIndex();
}else{var expression=facet._expression;
r=new Exhibit.Database._RangeIndex(facet._uiContext.getCollection().getAllItems(),function(item,f){expression.evaluateOnItem(item,database).values.visit(function(value){if(typeof value!="number"){value=parseFloat(value);
}if(!isNaN(value)){f(value);
}});
});
}facet._rangeModeMaxRange={min:facet._minRangePrecision(r.getMin()),max:facet._maxRangePrecision(r.getMax())};
var database=facet._uiContext.getDatabase();
var getter=function(item,f){facet._expression.evaluateOnItem(item,database).values.visit(function(value){if(typeof value!="number"){value=parseFloat(value);
}if(!isNaN(value)){f(value);
}});
};
facet._rangeIndex=new Exhibit.Database._RangeIndex(facet._uiContext.getCollection().getAllItems(),getter);
}else{if(facet._mode==Exhibit.AnimationFacet.MODE_DATE){}}}};
Exhibit.AnimationFacet.prototype.dispose=function(){if(Exhibit.AnimationFacet.DEBUG1){console.log("dispose");
}this._ui.dispose();
if(this._cache){this._cache.dispose();
this._cache=null;
}if(this._rangeIndex){this._rangeIndex=null;
}this._uiContext.getCollection().removeFacet(this);
this._uiContext=null;
this._div.innerHTML="";
this._div=null;
this._expression=null;
this._settings=null;
this._listModePeriods=null;
this._listModeCurrentPeriods=null;
this._listModeValueSet=null;
this._rangeModeMaxRange=null;
this._rangeModeCurrentRange=null;
};
Exhibit.AnimationFacet.prototype.hasRestrictions=function(){if(Exhibit.AnimationFacet.DEBUG1){console.log("hasRestrictions");
}if(this._mode==Exhibit.AnimationFacet.MODE_LIST){return this._listModeCurrentPeriods.length>0;
}else{if(this._mode==Exhibit.AnimationFacet.MODE_RANGE){var B=(this._rangeModeCurrentRange.min!=null&&this._rangeModeCurrentRange.min!=this._rangeModeMaxRange.min);
var A=(this._rangeModeCurrentRange.max!=null&&this._rangeModeCurrentRange.max!=this._rangeModeMaxRange.max);
return(B||A);
}else{if(this._mode==Exhibit.AnimationFacet.MODE_DATE){return false;
}else{return false;
}}}};
Exhibit.AnimationFacet.prototype.restrict=function(E){if(Exhibit.AnimationFacet.DEBUG1){console.log("restrict",E);
}if(this._mode==Exhibit.AnimationFacet.MODE_LIST){if(this._listModeCurrentPeriods.length==0){return E;
}else{var H=new Exhibit.Set();
for(var D=0;
D<this._listModeCurrentPeriods.length;
D++){var A=this._listModeCurrentPeriods[D];
for(var C=0;
C<A.select.length;
C++){H.add(A.select[C]);
}}return this._cache.getItemsFromValues(H,E);
}}else{if(this._mode==Exhibit.AnimationFacet.MODE_RANGE){var B=this._rangeModeCurrentRange.min;
var F=this._rangeModeCurrentRange.max;
if(this._expression.isPath()){var I=this._expression.getPath();
var G=this._uiContext.getDatabase();
return I.rangeBackward(B,F,false,E,G).values;
}else{return this._rangeIndex.getSubjectsInRange(B,F,false,null,E);
}}else{if(this._mode==Exhibit.AnimationFacet.MODE_DATE){}}}};
Exhibit.AnimationFacet.prototype.clearAllRestrictions=function(){if(Exhibit.AnimationFacet.DEBUG1){console.log("clearAllRestrictions");
}Exhibit.AnimationFacet.testRemoteLog();
if(this.hasRestrictions()){if(this._mode==Exhibit.AnimationFacet.MODE_LIST){this._listModeCurrentPeriods=[];
}else{if(this._mode==Exhibit.AnimationFacet.MODE_RANGE){this._rangeModeCurrentRange.min=this._rangeModeMaxRange.min;
this._rangeModeCurrentRange.max=this._rangeModeMaxRange.max;
}}var C=SimileAjax.RemoteLog.logActive?this._uiContext.getCollection().countRestrictedItems():0;
this._notifyCollection();
var A=SimileAjax.RemoteLog.logActive?this._uiContext.getCollection().countRestrictedItems():0;
var B=SimileAjax.RemoteLog.logActive?this._uiContext.getCollection().countAllItems():0;
SimileAjax.RemoteLog.possiblyLog({facetType:"AnimationFacet",facetLabel:this._settings.facetLabel,operation:"clearAllRestrictions",exhibitSize:B,preUpdateSize:C,postUpdateSize:A});
}};
Exhibit.AnimationFacet.prototype.applyRestrictions=function(A){};
Exhibit.AnimationFacet.prototype.setSelection=function(B,A){};
Exhibit.AnimationFacet.prototype.update=function(A){if(Exhibit.AnimationFacet.DEBUG1){console.log("update",A);
}};
Exhibit.AnimationFacet.prototype._notifyCollection=function(){if(Exhibit.AnimationFacet.DEBUG1){console.log("_notifyCollection");
}this._uiContext.getCollection().onFacetUpdated(this);
};
Exhibit.AnimationFacet.prototype._initializeUI=function(){if(Exhibit.AnimationFacet.DEBUG1){console.log("_initializeUI");
}switch(this._settings["type"]){case"youtube":this._ui=new Exhibit.AnimationFacet.YouTube(this);
break;
case"slideshare":this._ui=new Exhibit.AnimationFacet.SlideShare(this);
break;
case"inline":this._ui=new Exhibit.AnimationFacet.Inline(this);
break;
case"default":default:this._ui=new Exhibit.AnimationFacet.DefaultUI(this);
break;
}this._ui.setDuration(this._settings.duration);
var A=this._ui.initUI();
$(this._div).html(A);
this._ui.postInitUI();
};
Exhibit.AnimationFacet.prototype._clearSelections=function(){if(Exhibit.AnimationFacet.DEBUG1){console.log("_clearSelections");
}var B={};
var A=this;
SimileAjax.History.addLengthyAction(function(){B.restrictions=A.clearAllRestrictions();
},function(){A.applyRestrictions(B.restrictions);
},String.substitute(Exhibit.FacetUtilities.l10n["facetClearSelectionsActionTitle"],[this._settings.facetLabel]));
};
Exhibit.AnimationFacet.testRemoteLog=function(){if(!SimileAjax["RemoteLog"]){SimileAjax.RemoteLog={logActive:false};
SimileAjax.RemoteLog.possiblyLog=function(A){};
}};
Exhibit.AnimationFacet.prototype.updateModeParams=function(F){if(this._mode==Exhibit.AnimationFacet.MODE_LIST){var J=[];
for(var E=0;
E<this._listModePeriods.length;
E++){var B=this._listModePeriods[E];
if(F>=B.from&&F<B.to){J.push(B);
}}var G=false;
if(J.length!=this._listModeCurrentPeriods.length){G=true;
}else{for(var E=0;
E<this._listModeCurrentPeriods.length;
E++){if(J[E]!=this._listModeCurrentPeriods[E]){G=true;
break;
}}}if(G){this._listModeCurrentPeriods=J;
this._notifyCollection();
}}else{if(this._mode==Exhibit.AnimationFacet.MODE_RANGE){var A=this._rangeModeMaxRange.max-this._rangeModeMaxRange.min;
var I=F/this._ui.getDuration();
var C=Math.floor(this._rangeModeMaxRange.min+A*I);
var D=this._minRangePrecision(C);
var H=this._maxRangePrecision(C);
if(this._rangeModeCurrentRange.min!=D||this._rangeModeCurrentRange.max!=H){this._rangeModeCurrentRange.min=D;
this._rangeModeCurrentRange.max=H;
this._notifyCollection();
}}else{if(this._mode==Exhibit.AnimationFacet.MODE_DATE){}}}};
Exhibit.AnimationFacet.prototype._minRangePrecision=function(A){var B=this._rangeModePrecision;
A-=((A>=0)?A%B:B-Math.abs(A%B));
return A;
};
Exhibit.AnimationFacet.prototype._maxRangePrecision=function(A){var B=this._rangeModePrecision;
A+=((A>=0)?B-A%B:Math.abs(A%B));
return A;
};
Exhibit.AnimationFacet.Labels=function(F,C,B){if(F._mode==Exhibit.AnimationFacet.MODE_LIST){if(B==undefined){B={base:0,showAsSeconds:false,inclusiveBounds:false};
}var D=(B.showAsSeconds)?function(G){return G+B.base;
}:function(H){var G=Math.floor(H/60);
var I=Math.ceil(H%60);
return G+":"+(I<10?"0":"")+I;
};
this.timeLabel=D(C);
this.lowerLabel=D(0);
this.upperLabel=D(F._ui.getDuration()-(B.inclusiveBounds?1:0));
}else{if(F._mode==Exhibit.AnimationFacet.MODE_RANGE){var A=F._rangeModeMaxRange.max-F._rangeModeMaxRange.min;
var E=C/F._ui.getDuration();
this.timeLabel=Math.floor(F._rangeModeMaxRange.min+A*E);
this.lowerLabel=F._rangeModeMaxRange.min;
this.upperLabel=F._rangeModeMaxRange.max;
}else{this.timeLabel="?";
this.lowerLabel="Lower";
this.upperLabel="Upper";
}}};
Exhibit.AnimationFacet.DefaultUI=function(B){this._duration=0;
this._dom=null;
this._facet=B;
this._currentTimePosition=0;
this._animationStartTime=0;
this._animationStartPosition=0;
this._animationFrameDelay=100;
this._animationPlaying=false;
this._dragging=false;
this._animationGlueFunc="__animation_glue__"+Exhibit.AnimationFacet._getNextAnimationUnique();
var A=this;
Exhibit.AnimationFacet.DefaultUI[this._animationGlueFunc]=function(){A._animate();
};
};
Exhibit.AnimationFacet.DefaultUI.prototype.dispose=function(){this._dom=null;
};
Exhibit.AnimationFacet.DefaultUI.prototype.setDuration=function(A){this._duration=A;
};
Exhibit.AnimationFacet.DefaultUI.prototype.getDuration=function(){return this._duration;
};
Exhibit.AnimationFacet.DefaultUI.prototype.initUI=function(){var F=new Exhibit.AnimationFacet.Labels(this._facet,0);
var E=this._facet._settings;
var B=E["height"]?" height:"+E["height"]:"10px";
var C='<div><div class="exhibit-facet-header" style="position:Relative;"><span class="exhibit-facet-header-filterControl" style="position:Absolute; display:Inline-Block; vertical-align:Middle; right:0px; top:0px; text-align:Right; white-space:NoWrap;"><span class="exhibit-facet-animation-button"></span>&nbsp;<input type="checkbox" class="exhibit-facet-animation-tickbox" /></span>'+((E["showLabel"])?'<span class="exhibit-facet-header-title">'+E["facetLabel"]+"</span>":"")+'</div><div class="exhibit-facet-animation-shaft-container"><div class="exhibit-facet-animation-shaft" style="position:Relative; width:100%;'+B+'"><div class="exhibit-facet-animation-shaft-markers" style="'+B+'"></div><div class="exhibit-facet-animation-shaft-thumb" style="position:Absolute;'+B+'"></div></div></div><div class="exhibit-facet-animation-labels" style="position:Relative; height:1em;"><div style="position:Absolute; left:0px;">'+F.lowerLabel+'</div><div style="position:Absolute; right:0px;">'+F.upperLabel+'</div><div class="exhibit-facet-animation-labels-time" style="text-align:Center"></div></div></div>';
var D=$(C);
this._dom={elmt:D.get()[0],shaft:$(".exhibit-facet-animation-shaft",D).get()[0],thumb:$(".exhibit-facet-animation-shaft-thumb",D).get()[0],time:$(".exhibit-facet-animation-labels-time",D).get()[0],button:$(".exhibit-facet-animation-button",D).get()[0],tickbox:$("input.exhibit-facet-animation-tickbox",D).get()[0],markers:$(".exhibit-facet-animation-shaft-markers",D).get()[0]};
var A=this;
$(this._dom.shaft).mousedown(function(G){if(G.which==1){G.preventDefault();
A._dragging=true;
}});
$(document).mousemove(function(H){if(A._dragging&&H.which==1){H.preventDefault();
var G=H.pageX-$(A._dom.shaft).offset().left;
A._updateThumbUI(G,false);
}}).mouseup(function(H){if(A._dragging&&H.which==1){H.preventDefault();
var G=H.pageX-$(A._dom.shaft).offset().left;
if(!A._updateThumbUI(G,true)){A._animationStartTime=(new Date()).getTime();
A._animationStartPosition=G;
}A._dragging=false;
}});
$(this._dom.tickbox).click(function(G){var H=$(this);
if(H.attr("checked")){A._facet.updateModeParams(A._currentTimePosition);
}else{A._facet.clearAllRestrictions();
}});
this._showPlayButton(true);
return this._dom.elmt;
};
Exhibit.AnimationFacet.DefaultUI.prototype.postInitUI=function(){this._updateThumbUI(0,false);
};
Exhibit.AnimationFacet.DefaultUI.prototype._showPlayButton=function(A){var B=this;
$(this._dom.button).html('<img src="data:image/png;base64,'+Exhibit.AnimationFacet[A?"PLAY_PNG":"PAUSE_PNG"]+'" />');
$("img",this._dom.button).click(A?function(C){B._animateStart();
}:function(C){B._animateStop();
});
$(this._dom.tickbox).attr("disabled",!A);
};
Exhibit.AnimationFacet.DefaultUI.prototype._updateThumbUI=function(A,C){var B=$(this._dom.shaft).width();
var F=(A>B-1);
A=(A<0)?0:A;
A=(A>B-1)?B-1:A;
var D=$(this._dom.thumb);
D.css("left",(A-D.width()/2)+"px");
this._currentTimePosition=Math.floor(this._duration*(A/B*1));
var E=new Exhibit.AnimationFacet.Labels(this._facet,this._currentTimePosition);
$(this._dom.time).html(E.timeLabel);
if(C){this._facet.updateModeParams(this._currentTimePosition);
$(this._dom.tickbox).attr("checked",this._facet.hasRestrictions()?"checked":"");
}return F;
};
Exhibit.AnimationFacet.DefaultUI.prototype._animateStart=function(){this._animationPlaying=true;
this._animationStartTime=(new Date()).getTime();
this._animationStartPosition=($(this._dom.thumb).offset().left)-($(this._dom.shaft).offset().left)+($(this._dom.thumb).width()/2);
this._showPlayButton(false);
setTimeout("Exhibit.AnimationFacet.DefaultUI."+this._animationGlueFunc+"()",this._animationFrameDelay);
};
Exhibit.AnimationFacet.DefaultUI.prototype._animateStop=function(){this._animationPlaying=false;
this._showPlayButton(true);
};
Exhibit.AnimationFacet.DefaultUI.prototype._animate=function(){var D=(new Date()).getTime()-this._animationStartTime;
var B=$(this._dom.shaft).width();
var A=B/(this._duration*1000);
var C=D*A;
var F=this._animationStartPosition+C;
var E=false;
if(!this._dragging){E=this._updateThumbUI(F,true);
}if(this._animationPlaying){if(!E){setTimeout("Exhibit.AnimationFacet.DefaultUI."+this._animationGlueFunc+"()",this._animationFrameDelay);
}else{this._animateStop();
this._updateThumbUI(0,false);
this._facet.clearAllRestrictions();
}}};
Exhibit.AnimationFacet.__augment=function(B){for(var A in B){if(A.indexOf("_X_")>=0){continue;
}if(typeof B[A]=="function"){B["_X_"+A]=B[A];
B[A]=function(){var C=B["_X_"+A].apply(B,arguments);
return C;
};
}}};


/* animation-inline.js */
Exhibit.AnimationFacet._settingSpecs["inlineshowplay"]={type:"boolean",defaultValue:true};
Exhibit.AnimationFacet._settingSpecs["inlinemodernstyle"]={type:"boolean",defaultValue:false};
Exhibit.AnimationFacet.Inline=function(B){this._duration=0;
this._dom=null;
this._facet=B;
this._animationStartTime=0;
this._animationStartPosition=0;
this._animationFrameDelay=100;
this._animationPlaying=false;
this._dragging=false;
this._animationGlueFunc="__animation_glue__"+Exhibit.AnimationFacet._getNextAnimationUnique();
var A=this;
Exhibit.AnimationFacet.Inline[this._animationGlueFunc]=function(){A._animate();
};
};
Exhibit.AnimationFacet.Inline.PLAY_PNG="iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAAZiS0dEAMkAyQDJYYDmDgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wJBw06OtKSuKQAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAVxJREFUKM+dk89KAlEUxn83fAxh3qSFT+HONrlyE25mV+3O20T0D6KEQgwtC5mNJCLq6KhMiuhCZ+Fp4U0TRKy7ufcc+H3ng/NdRORCRA75xzEiovadA85d133eFz4ASCaTxOPxBPAkIo/7OokBOI6D4zg0m03y+XzC9/2EiOSAU9d18zttZ7PZjWar1aJQKNDpdAAegbNtIkZENJPJ2Mp21WCAdrtFsVQiCAKAB+uksAGnj9NrEECXQvbC933K5TL9fh/g3jp5MSKiR6nUilmpGgMoqmCskN/2qVQqhGEIcBIDmEfRehwKan7cY4But4vneQyHQ4A7u9LiEp7NwSib3iEIAqrVKqPRCODWQqWNVUXR3E4y6EIZDAbUap+Mx2OAGwu9bt3zLIpgoYRfIfV6nclkor+gt50h6fd6NBoNptOpAtcWKu+VMM/zFLiy0Pu+2Y4Blxb6+Ouv+gZldbw7tlbjQQAAAABJRU5ErkJggg==";
Exhibit.AnimationFacet.Inline.PAUSE_PNG="iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAAZiS0dEAMkAyQDJYYDmDgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wJBw4TAryQIYgAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAP9JREFUKM99kt1xg0AMhD95aCHjspxuoASoybzThtNFbO1FebgfYAzWw83N7Wm10srGcQxOYhgG+4R3AH3fvwHTNLX7Gd4BpPQHnBYgpQQYEOXcVJYcyqNtOMZxJOMiCAx7l+2ekysYtlfh7phRqq9xqcxJwuW4HEkAfN9urbK7kDvy/G+tLLVettxf12tLXkcSRJZRem6y61wy6K9nTnY14rC1964xH8Tv85VJisxDn+XKom0v/ufxWKdd4NjgOTk5UXqyjZPLslCtjMhYGNTPxSrxKc7wS5UtCVexo8xgGIbWc8VcanvRrMLidENTmTbsF6UDmOf7R9n3eT58/wfel7gwBDKMLAAAAABJRU5ErkJggg==";
Exhibit.AnimationFacet.Inline.THUMB_PNG="iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAAZiS0dEAMwAzADM38FfGgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wIFAsaGOk3cJEAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAgpJREFUKM+dkz9OG0EYxX8zOxvJiMiDwQYbS4QQ2lRIMQoSDRAuwAFSUeQCewSuQJUDcISUSLELKsoAKeKVRdaWEVpEpJ1/KXaxUJQ0mW70vd8370lvBH+ck5OTj8ARsAU0gClwAZwlSfL5uVY8g94Cp0DvzeYmGxuvaTZbTMZjbm6+c3X1DWAAHCdJcjmDK/CL1rq1836HzmoHFUUIKQFwzjEajTg/P+fu7i4D9pMkuZTVw6da69b+wQEr7RWiKEKpmDiOiZVCRYp2u83hh0O01q3KIVGV8dPu7i6NhQZRHBEphVKKOH6BEBBCIPiAkAKt61xfX3f39vZ+SOBobe0Vi4uLBIAAVGLnLd5DCB5fTllaarK+vg5wJIGtbneV4EMp8h7nHNZZTGEwpsA5h3cO78t5t9sF2FJAo16v47xDOomQorRKQCIJhHKhtbMFekEDNBQwnU6nzdpcrYQBPMjII4SoUgS8c1jncM4xmUwAphK4SNMUZx3WWIy1GGswxlCYorReFBhjsNZinSUdpgAXEjhL05TxZFzmNBZjSvgp8+xuDNnPjOFwCHD2VJL+y/n53rvtHnO1OYSURELO+hdCmfvx1yOD/oA8zwdJkmw/leQ4f3jIBv0BWZZhi8qyMRRFgSkKsiyj/7VPnucZcPzPbnc6HZaXl9Fac39/z+3tLaPR6O/d/t9f9RsoTTP4+32UigAAAABJRU5ErkJggg==";
Exhibit.AnimationFacet.Inline.SHAFT_PNG="iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAAZiS0dEAIgAiACIdJABBgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wIFAsiBOqpkCUAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAbZJREFUKM+dk81uGjEUhT+PPd3WDT8TKBLQNG/ArpHYTJM8Eo/AQ7FDKqRpXqAhVdCgERqqUETSxQy2s5iBkDbNond1fe1zjn3uteCP6Pf7/Ct6vd6ztXgJ9PH4mKOjD1QqVX4uFtzc/OD6+vtfJGIfqLXm5NMJ9fd1lJQIzwPAGEMcxwyHQ5bL5Y7A27Jprfl8esph7RApJUr5+L6PrxRKKmq1Gudn52itdzeQW9Vut8vBuwOkL5FKoZTC998gBDjncNYhPIHWb5lMJoRhmCs3my1KpRIOwAHFYWM3WAvOWWy+S7lcod1uA6AAN53eMp3e8nq4fX9zcBAEhe8CnCtcFLmOcOAEooDmiWNbUK12C+GeuHcnd4htnlO6vS6ri/GFaDQadDodlFRIJZFS4nneDuScxVqLMYaN2XD59ZIoilAAs9mMZqtJpVzBOoe1NgdvX1vUjDEsFguiKMpbNRgMCMOQX3dLqkEVKSW2cNvaJ0VjDA+/H7j6dkWaps+HZH1/z3g0JkkSNmlGmqVkWUaapmRpSpIkjL6MWK/Xr892vV4nCAK01qxWK+bzOXEcvzzb//urHgE3adNcFxKl0AAAAABJRU5ErkJggg==";
Exhibit.AnimationFacet.Inline.prototype.dispose=function(){this._dom=null;
};
Exhibit.AnimationFacet.Inline.prototype.setDuration=function(A){this._duration=A;
};
Exhibit.AnimationFacet.Inline.prototype.getDuration=function(){return this._duration;
};
Exhibit.AnimationFacet.Inline.prototype.initUI=function(){var D=new Exhibit.AnimationFacet.Labels(this._facet,0);
var B=this._facet._settings;
var J=B["inlineshowplay"];
var C=null;
if(!B["inlinemodernstyle"]){var G=B["width"]?" width:"+B["width"]+";":"width:100px;";
var E=B["height"]?" height:"+B["height"]+";":" height:10px;";
var C="<span>"+((J)?'<span class="exhibit-facet-animation-button"></span>':"")+'<div style="display:Inline-Block; margin-left:5px; margin-right:5px;'+G+'" class="exhibit-facet-animation-shaft-container"><div class="exhibit-facet-animation-shaft" style="position:Relative; width:100%;'+E+'"><div class="exhibit-facet-animation-shaft-thumb" style="position:Absolute;'+E+'"></div></div></div></span>';
}else{var G=B["width"]?" width:"+B["width"]+";":"width:100px;";
var H="border:None; height:15px; background-image:url(data:image/png;base64,"+Exhibit.AnimationFacet.Inline.SHAFT_PNG+"); background-repeat:Repeat-X;";
var F="border:None; width:15px; height:15px; background-image:url(data:image/png;base64,"+Exhibit.AnimationFacet.Inline.THUMB_PNG+"); background-repeat:None;";
var C="<span>"+((J)?'<span class="exhibit-facet-animation-button"></span>':"")+'<div style="display:Inline-Block; border:None; margin-left:8px; margin-right:8px;'+G+'" class="exhibit-facet-animation-shaft-container"><div class="exhibit-facet-animation-shaft" style="position:Relative; width:100%; '+H+'"><div class="exhibit-facet-animation-shaft-thumb" style="position:Absolute; '+F+'"></div></div></div></span>';
}var A=$(C);
this._dom={elmt:A.get()[0],shaft:$(".exhibit-facet-animation-shaft",A).get()[0],thumb:$(".exhibit-facet-animation-shaft-thumb",A).get()[0],button:$(".exhibit-facet-animation-button",A).get()[0]};
var I=this;
$(this._dom.shaft).mousedown(function(K){if(K.which==1){K.preventDefault();
I._dragging=true;
}});
$(document).mousemove(function(L){if(I._dragging&&L.which==1){L.preventDefault();
var K=L.pageX-$(I._dom.shaft).offset().left;
I._updateThumbUI(K,false);
}}).mouseup(function(L){if(I._dragging&&L.which==1){L.preventDefault();
var K=L.pageX-$(I._dom.shaft).offset().left;
if(!I._updateThumbUI(K,true)){I._animationStartTime=(new Date()).getTime();
I._animationStartPosition=K;
}I._dragging=false;
}});
this._showPlayButton(true);
return this._dom.elmt;
};
Exhibit.AnimationFacet.Inline.prototype.postInitUI=function(){this._updateThumbUI(0,false);
};
Exhibit.AnimationFacet.Inline.prototype._showPlayButton=function(A){var B=this;
var C=(this._facet._settings["inlinemodernstyle"])?Exhibit.AnimationFacet.Inline:Exhibit.AnimationFacet;
$(this._dom.button).html('<img src="data:image/png;base64,'+C[A?"PLAY_PNG":"PAUSE_PNG"]+'" />');
$("img",this._dom.button).click(A?function(D){B._animateStart();
}:function(D){B._animateStop();
});
};
Exhibit.AnimationFacet.Inline.prototype._updateThumbUI=function(A,D){var B=$(this._dom.shaft).width();
var F=(A>B-1);
A=(A<0)?0:A;
A=(A>B-1)?B-1:A;
var E=$(this._dom.thumb);
E.css("left",(A-E.width()/2)+"px");
var C=Math.floor(this._duration*(A/B*1));
if(D){this._facet.updateModeParams(C);
}return F;
};
Exhibit.AnimationFacet.Inline.prototype._animateStart=function(){this._animationPlaying=true;
this._animationStartTime=(new Date()).getTime();
this._animationStartPosition=($(this._dom.thumb).offset().left)-($(this._dom.shaft).offset().left)+($(this._dom.thumb).width()/2);
this._showPlayButton(false);
setTimeout("Exhibit.AnimationFacet.Inline."+this._animationGlueFunc+"()",this._animationFrameDelay);
};
Exhibit.AnimationFacet.Inline.prototype._animateStop=function(){this._animationPlaying=false;
this._showPlayButton(true);
};
Exhibit.AnimationFacet.Inline.prototype._animate=function(){var D=(new Date()).getTime()-this._animationStartTime;
var B=$(this._dom.shaft).width();
var A=B/(this._duration*1000);
var C=D*A;
var F=this._animationStartPosition+C;
var E=false;
if(!this._dragging){E=this._updateThumbUI(F,true);
}if(this._animationPlaying){if(!E){setTimeout("Exhibit.AnimationFacet.Inline."+this._animationGlueFunc+"()",this._animationFrameDelay);
}else{this._animateStop();
this._updateThumbUI(0,false);
this._facet.clearAllRestrictions();
}}};


/* animation-slideshare.js */
Exhibit.AnimationFacet._settingSpecs["sswidth"]={type:"int",defaultValue:598};
Exhibit.AnimationFacet._settingSpecs["ssheight"]={type:"int",defaultValue:480};
Exhibit.AnimationFacet._settingSpecs["ssslides"]={type:"text",defaultValue:"simile-exhibit-vgsom-12312308"};
Exhibit.AnimationFacet._settingSpecs["sslabelfromone"]={type:"boolean",defaultValue:false};
Exhibit.AnimationFacet._settingSpecs["ssshowtrack"]={type:"boolean",defaultValue:true};
Exhibit.AnimationFacet.SlideShare=function(C){this._duration=-1;
this._facet=C;
this._playerId="ExhibitAnimationFacetSlideShare__slideshare__"+Exhibit.AnimationFacet._getNextAnimationUnique();
this._playerObj=null;
this._lastSlide=-1;
this._$tickbox=null;
this._hideTickbox=false;
this._animationFrameDelay=100;
this._animationPlaying=false;
var B="__animation_glue__"+Exhibit.AnimationFacet._getNextAnimationUnique();
this._animationGlueFunc="Exhibit.AnimationFacet.SlideShare."+B+"()";
var A=this;
Exhibit.AnimationFacet.SlideShare[B]=function(){A._animate();
};
};
Exhibit.AnimationFacet.SlideShare._mapVideoObjectToPlayerId={};
Exhibit.AnimationFacet.SlideShare.prototype.dispose=function(){this._facet=null;
this._playerObj=null;
this._playerId=null;
};
Exhibit.AnimationFacet.SlideShare.prototype.setDuration=function(A){};
Exhibit.AnimationFacet.SlideShare.prototype.getDuration=function(){if(this._duration<0){var A=this._playerObj.getCurrentSlide();
this._playerObj.last();
this._duration=this._playerObj.getCurrentSlide();
this._playerObj.jumpTo(A);
}return this._duration;
};
Exhibit.AnimationFacet.SlideShare.prototype.initUI=function(){var C=this._facet._settings;
this._hideTickbox=!C["showLabel"];
var B='<span style="display:Inline-Block; position:Relative;"><input type="checkbox" class="exhibit-facet-animation-tickbox" style="display:Block; position:Absolute; right:0px; top:0px;" /><div class="exhibit-facet-header">'+((C["showLabel"])?'<span class="exhibit-facet-header-title">'+C["facetLabel"]+"</span>":"")+'</div><div style="width:'+C["sswidth"]+"px; height:"+C["ssheight"]+'px;"><div id="'+this._playerId+'"></div></div>'+(C["ssshowtrack"]?'<div style="width:'+C["sswidth"]+'px;"><div class="exhibit-facet-animation-bar-container"><div class="exhibit-facet-animation-bar" style="position:Relative; width:0px;"></div></div><div class="exhibit-facet-animation-labels" style="position:Relative; height:1em;"><div style="position:Absolute; left:0px;">&mdash;</div><div style="position:Absolute; right:0px;">&mdash;</div><div class="exhibit-facet-animation-labels-time" style="text-align:Center"></div></div></div>':"")+"</span>";
$el=$(B);
var A=this;
this._$tickbox=$($("input.exhibit-facet-animation-tickbox",$el).get()[0]);
if(!C["showLabel"]){this._$tickbox.css("right","5px").css("top","5px").css("margin","0px");
}this._$tickbox.click(function(D){var E=$(this);
if(E.attr("checked")){A._facet.updateModeParams(A._playerObj.getCurrentSlide()-1);
}else{A._facet.clearAllRestrictions();
}});
return $el;
};
Exhibit.AnimationFacet.SlideShare.prototype.postInitUI=function(){var C=this._facet._settings;
var A=this;
var B="http://static.slidesharecdn.com/swf/ssplayer2.swf";
var D={doc:C["ssslides"],startSlide:1,rel:0};
swfobject.embedSWF(B,this._playerId,C["sswidth"],C["ssheight"],"8",null,D,{allowScriptAccess:"always",wmode:"transparent",allowfullscreen:"true"},{id:this._playerId},function(E){if(E.success){A._playerObj=$("#"+A._playerId).get()[0];
setTimeout(A._animationGlueFunc,A._animationFrameDelay);
}else{}});
Exhibit.AnimationFacet.SlideShare._mapVideoObjectToPlayerId[this._playerId]=this;
};
Exhibit.AnimationFacet.SlideShare.prototype._animate=function(){if(this._playerObj.getCurrentSlide){var A=this._playerObj.getCurrentSlide()-1;
if(A!=this._lastSlide){this._lastSlide=A;
this._updateLabels(A);
this._facet.updateModeParams(A);
this._$tickbox.attr("checked",this._facet.hasRestrictions()?"checked":"");
}}else{}setTimeout(this._animationGlueFunc,this._animationFrameDelay);
};
Exhibit.AnimationFacet.SlideShare.prototype._updateLabels=function(F){if(!this._facet._settings["ssshowtrack"]){return ;
}var C=this.getDuration();
if(C==0){return ;
}var D={base:this._facet._settings["sslabelfromone"],showAsSeconds:true,inclusiveBounds:true};
var E=new Exhibit.AnimationFacet.Labels(this._facet,Math.floor(F),D);
var H=$(".exhibit-facet-animation-labels div",this._facet._div).each(function(J){switch(J){case 0:$(this).html(E.lowerLabel);
break;
case 1:$(this).html(E.upperLabel);
break;
case 2:$(this).html(E.timeLabel);
break;
}});
var B=$(".exhibit-facet-animation-bar-container",this._facet._div);
var G=$(".exhibit-facet-animation-bar",B);
var I=B.width();
var A=(1*I/C);
G.css("width",Math.floor(F*A)+"px");
};


/* animation-youtube.js */
Exhibit.AnimationFacet._settingSpecs["ytwidth"]={type:"int",defaultValue:280};
Exhibit.AnimationFacet._settingSpecs["ytheight"]={type:"int",defaultValue:170};
Exhibit.AnimationFacet._settingSpecs["ytvideo"]={type:"text",defaultValue:"ILGK83V6h9s"};
Exhibit.AnimationFacet._settingSpecs["ytshowtrack"]={type:"boolean",defaultValue:true};
Exhibit.AnimationFacet.YouTube=function(C){this._duration=0;
this._facet=C;
this._playerId="__youtube__"+Exhibit.AnimationFacet._getNextAnimationUnique();
this._divId="ExhibitAnimationFacetYouTube"+this._playerId;
this._playerObj=null;
this._$tickbox=null;
this._hideTickbox=false;
this._animationFrameDelay=100;
this._animationPlaying=false;
var B="__animation_glue__"+Exhibit.AnimationFacet._getNextAnimationUnique();
this._animationGlueFunc="Exhibit.AnimationFacet.YouTube."+B+"()";
var A=this;
Exhibit.AnimationFacet.YouTube[B]=function(){A._animate();
};
};
Exhibit.AnimationFacet.YouTube.YT_UNSTARTED=-1;
Exhibit.AnimationFacet.YouTube.YT_ENDED=0;
Exhibit.AnimationFacet.YouTube.YT_PLAYING=1;
Exhibit.AnimationFacet.YouTube.YT_PAUSED=2;
Exhibit.AnimationFacet.YouTube.YT_BUFFERING=3;
Exhibit.AnimationFacet.YouTube.YT_CUED=5;
Exhibit.AnimationFacet.YouTube._mapVideoObjectToPlayerId={};
Exhibit.AnimationFacet.YouTube.prototype.dispose=function(){this._facet=null;
this._playerObj=null;
this._divId=null;
this._playerId=null;
};
Exhibit.AnimationFacet.YouTube.prototype.setDuration=function(A){};
Exhibit.AnimationFacet.YouTube.prototype.getDuration=function(){return this._playerObj.getDuration();
};
Exhibit.AnimationFacet.YouTube.prototype.initUI=function(){var C=this._facet._settings;
this._hideTickbox=!C["showLabel"];
var B='<span style="display:Inline-Block; position:Relative;"><input type="checkbox" class="exhibit-facet-animation-tickbox" style="display:Block; position:Absolute; right:0px; top:0px;" /><div class="exhibit-facet-header">'+((C["showLabel"])?'<span class="exhibit-facet-header-title">'+C["facetLabel"]+"</span>":"")+'</div><div style="width:'+C["ytwidth"]+"px; height:"+C["ytheight"]+'px;"><div id="'+this._divId+'"></div></div>'+(C["ytshowtrack"]?'<div style="width:'+C["ytwidth"]+'px;"><div class="exhibit-facet-animation-bar-container"><div class="exhibit-facet-animation-bar" style="position:Relative; width:0px;"></div></div><div class="exhibit-facet-animation-labels" style="position:Relative; height:1em;"><div style="position:Absolute; left:0px;">&mdash;</div><div style="position:Absolute; right:0px;">&mdash;</div><div class="exhibit-facet-animation-labels-time" style="text-align:Center"></div></div></div>':"")+"</span>";
$el=$(B);
var A=this;
this._$tickbox=$($("input.exhibit-facet-animation-tickbox",$el).get()[0]);
if(!C["showLabel"]){this._$tickbox.css("right","5px").css("top","5px").css("margin","0px");
}this._$tickbox.click(function(D){var E=$(this);
if(E.attr("checked")){A._facet.updateModeParams(A._playerObj.getCurrentTime());
}else{A._facet.clearAllRestrictions();
}});
return $el;
};
Exhibit.AnimationFacet.YouTube.prototype.postInitUI=function(){var B=this._facet._settings;
var A="http://www.youtube.com/v/";
swfobject.embedSWF(A+B["ytvideo"]+"?version=3&enablejsapi=1&title=Video+facet&autohide=2&color=white&egm=0&border=0&iv_load_policy=3&modestbranding=1&rel=0&showinfo=0&fs=0&playerapiid="+this._playerId,this._divId,B["ytwidth"],B["ytheight"],"8",null,null,{allowScriptAccess:"always",wmode:"transparent",allowfullscreen:"true"},{id:this._playerId});
Exhibit.AnimationFacet.YouTube._mapVideoObjectToPlayerId[this._playerId]=this;
};
Exhibit.AnimationFacet.YouTube.prototype._animate=function(){if(this._animationPlaying){this._update();
setTimeout(this._animationGlueFunc,this._animationFrameDelay);
}};
Exhibit.AnimationFacet.YouTube.prototype._onStateChange=function(A){switch(A){case Exhibit.AnimationFacet.YouTube.YT_PLAYING:this._animationPlaying=true;
this._disableTickbox(true);
this._update();
setTimeout(this._animationGlueFunc,this._animationFrameDelay);
break;
case Exhibit.AnimationFacet.YouTube.YT_PAUSED:this._animationPlaying=false;
this._disableTickbox(false);
this._update();
break;
case Exhibit.AnimationFacet.YouTube.YT_ENDED:this._animationPlaying=false;
this._disableTickbox(false);
this._updateLabels(0);
this._facet.clearAllRestrictions();
break;
}};
Exhibit.AnimationFacet.YouTube.prototype._disableTickbox=function(A){this._$tickbox.attr("disabled",A);
if(this._hideTickbox){this._$tickbox.css("display",(A?"None":"Inline"));
}};
Exhibit.AnimationFacet.YouTube.prototype._update=function(A){var A=(A==undefined)?this._playerObj.getCurrentTime():A;
this._updateLabels(A);
this._facet.updateModeParams(A);
this._$tickbox.attr("checked",this._facet.hasRestrictions()?"checked":"");
};
Exhibit.AnimationFacet.YouTube.prototype._updateLabels=function(B){if(!this._facet._settings["ytshowtrack"]){return ;
}var C=this.getDuration();
if(C==0){return ;
}var H=new Exhibit.AnimationFacet.Labels(this._facet,Math.floor(B));
var F=$(".exhibit-facet-animation-labels div",this._facet._div).each(function(I){switch(I){case 0:$(this).html(H.lowerLabel);
break;
case 1:$(this).html(H.upperLabel);
break;
case 2:$(this).html(H.timeLabel);
break;
}});
var G=$(".exhibit-facet-animation-bar-container",this._facet._div);
var E=$(".exhibit-facet-animation-bar",G);
var A=G.width();
var D=(1*A/C);
E.css("width",Math.floor(B*D)+"px");
};
function onYouTubePlayerReady(B){var A=Exhibit.AnimationFacet.YouTube._mapVideoObjectToPlayerId[B];
var C="__EVENT_HANDLER__"+B;
Exhibit.AnimationFacet.YouTube[C]=function(D){A._onStateChange(D);
};
A._playerObj=document.getElementById(B);
A._playerObj.addEventListener("onStateChange","Exhibit.AnimationFacet.YouTube."+C);
}

/* swfobject.js */
var swfobject=function(){var AQ="undefined",Ac="object",AB="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",Ad="application/x-shockwave-flash",AC="SWFObjectExprInst",AW="onreadystatechange",AF=window,Ak=document,Aa=navigator,AA=false,Z=[Am],Af=[],AG=[],AL=[],Ai,AD,AP,AS,AK=false,At=false,Ag,AN,Ah=true,AH=function(){var A=typeof Ak.getElementById!=AQ&&typeof Ak.getElementsByTagName!=AQ&&typeof Ak.createElement!=AQ,E=Aa.userAgent.toLowerCase(),C=Aa.platform.toLowerCase(),H=C?/win/.test(C):/win/.test(E),J=C?/mac/.test(C):/mac/.test(E),G=/webkit/.test(E)?parseFloat(E.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,D=!+"\v1",F=[0,0,0],K=null;
if(typeof Aa.plugins!=AQ&&typeof Aa.plugins[AB]==Ac){K=Aa.plugins[AB].description;
if(K&&!(typeof Aa.mimeTypes!=AQ&&Aa.mimeTypes[Ad]&&!Aa.mimeTypes[Ad].enabledPlugin)){AA=true;
D=false;
K=K.replace(/^.*\s+(\S+\s+\S+$)/,"$1");
F[0]=parseInt(K.replace(/^(.*)\..*$/,"$1"),10);
F[1]=parseInt(K.replace(/^.*\.(.*)\s.*$/,"$1"),10);
F[2]=/[a-zA-Z]/.test(K)?parseInt(K.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;
}}else{if(typeof AF.ActiveXObject!=AQ){try{var I=new ActiveXObject(X);
if(I){K=I.GetVariable("$version");
if(K){D=true;
K=K.split(" ")[1].split(",");
F=[parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10)];
}}}catch(B){}}}return{w3:A,pv:F,wk:G,ie:D,win:H,mac:J};
}(),Aj=function(){if(!AH.w3){return ;
}if((typeof Ak.readyState!=AQ&&Ak.readyState=="complete")||(typeof Ak.readyState==AQ&&(Ak.getElementsByTagName("body")[0]||Ak.body))){Ao();
}if(!AK){if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("DOMContentLoaded",Ao,false);
}if(AH.ie&&AH.win){Ak.attachEvent(AW,function(){if(Ak.readyState=="complete"){Ak.detachEvent(AW,arguments.callee);
Ao();
}});
if(AF==top){(function(){if(AK){return ;
}try{Ak.documentElement.doScroll("left");
}catch(A){setTimeout(arguments.callee,0);
return ;
}Ao();
})();
}}if(AH.wk){(function(){if(AK){return ;
}if(!/loaded|complete/.test(Ak.readyState)){setTimeout(arguments.callee,0);
return ;
}Ao();
})();
}Ab(Ao);
}}();
function Ao(){if(AK){return ;
}try{var B=Ak.getElementsByTagName("body")[0].appendChild(AR("span"));
B.parentNode.removeChild(B);
}catch(A){return ;
}AK=true;
var D=Z.length;
for(var C=0;
C<D;
C++){Z[C]();
}}function AJ(A){if(AK){A();
}else{Z[Z.length]=A;
}}function Ab(A){if(typeof AF.addEventListener!=AQ){AF.addEventListener("load",A,false);
}else{if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("load",A,false);
}else{if(typeof AF.attachEvent!=AQ){Al(AF,"onload",A);
}else{if(typeof AF.onload=="function"){var B=AF.onload;
AF.onload=function(){B();
A();
};
}else{AF.onload=A;
}}}}}function Am(){if(AA){Y();
}else{AM();
}}function Y(){var D=Ak.getElementsByTagName("body")[0];
var B=AR(Ac);
B.setAttribute("type",Ad);
var A=D.appendChild(B);
if(A){var C=0;
(function(){if(typeof A.GetVariable!=AQ){var E=A.GetVariable("$version");
if(E){E=E.split(" ")[1].split(",");
AH.pv=[parseInt(E[0],10),parseInt(E[1],10),parseInt(E[2],10)];
}}else{if(C<10){C++;
setTimeout(arguments.callee,10);
return ;
}}D.removeChild(B);
A=null;
AM();
})();
}else{AM();
}}function AM(){var G=Af.length;
if(G>0){for(var H=0;
H<G;
H++){var C=Af[H].id;
var L=Af[H].callbackFn;
var A={success:false,id:C};
if(AH.pv[0]>0){var I=Ar(C);
if(I){if(AO(Af[H].swfVersion)&&!(AH.wk&&AH.wk<312)){AX(C,true);
if(L){A.success=true;
A.ref=AU(C);
L(A);
}}else{if(Af[H].expressInstall&&AT()){var E={};
E.data=Af[H].expressInstall;
E.width=I.getAttribute("width")||"0";
E.height=I.getAttribute("height")||"0";
if(I.getAttribute("class")){E.styleclass=I.getAttribute("class");
}if(I.getAttribute("align")){E.align=I.getAttribute("align");
}var F={};
var D=I.getElementsByTagName("param");
var K=D.length;
for(var J=0;
J<K;
J++){if(D[J].getAttribute("name").toLowerCase()!="movie"){F[D[J].getAttribute("name")]=D[J].getAttribute("value");
}}AE(E,F,C,L);
}else{Ae(I);
if(L){L(A);
}}}}}else{AX(C,true);
if(L){var B=AU(C);
if(B&&typeof B.SetVariable!=AQ){A.success=true;
A.ref=B;
}L(A);
}}}}}function AU(B){var D=null;
var C=Ar(B);
if(C&&C.nodeName=="OBJECT"){if(typeof C.SetVariable!=AQ){D=C;
}else{var A=C.getElementsByTagName(Ac)[0];
if(A){D=A;
}}}return D;
}function AT(){return !At&&AO("6.0.65")&&(AH.win||AH.mac)&&!(AH.wk&&AH.wk<312);
}function AE(F,D,H,E){At=true;
AP=E||null;
AS={success:false,id:H};
var A=Ar(H);
if(A){if(A.nodeName=="OBJECT"){Ai=An(A);
AD=null;
}else{Ai=A;
AD=H;
}F.id=AC;
if(typeof F.width==AQ||(!/%$/.test(F.width)&&parseInt(F.width,10)<310)){F.width="310";
}if(typeof F.height==AQ||(!/%$/.test(F.height)&&parseInt(F.height,10)<137)){F.height="137";
}Ak.title=Ak.title.slice(0,47)+" - Flash Player Installation";
var B=AH.ie&&AH.win?"ActiveX":"PlugIn",C="MMredirectURL="+AF.location.toString().replace(/&/g,"%26")+"&MMplayerType="+B+"&MMdoctitle="+Ak.title;
if(typeof D.flashvars!=AQ){D.flashvars+="&"+C;
}else{D.flashvars=C;
}if(AH.ie&&AH.win&&A.readyState!=4){var G=AR("div");
H+="SWFObjectNew";
G.setAttribute("id",H);
A.parentNode.insertBefore(G,A);
A.style.display="none";
(function(){if(A.readyState==4){A.parentNode.removeChild(A);
}else{setTimeout(arguments.callee,10);
}})();
}AZ(F,D,H);
}}function Ae(A){if(AH.ie&&AH.win&&A.readyState!=4){var B=AR("div");
A.parentNode.insertBefore(B,A);
B.parentNode.replaceChild(An(A),B);
A.style.display="none";
(function(){if(A.readyState==4){A.parentNode.removeChild(A);
}else{setTimeout(arguments.callee,10);
}})();
}else{A.parentNode.replaceChild(An(A),A);
}}function An(B){var D=AR("div");
if(AH.win&&AH.ie){D.innerHTML=B.innerHTML;
}else{var E=B.getElementsByTagName(Ac)[0];
if(E){var A=E.childNodes;
if(A){var F=A.length;
for(var C=0;
C<F;
C++){if(!(A[C].nodeType==1&&A[C].nodeName=="PARAM")&&!(A[C].nodeType==8)){D.appendChild(A[C].cloneNode(true));
}}}}}return D;
}function AZ(E,G,C){var D,A=Ar(C);
if(AH.wk&&AH.wk<312){return D;
}if(A){if(typeof E.id==AQ){E.id=C;
}if(AH.ie&&AH.win){var F="";
for(var I in E){if(E[I]!=Object.prototype[I]){if(I.toLowerCase()=="data"){G.movie=E[I];
}else{if(I.toLowerCase()=="styleclass"){F+=' class="'+E[I]+'"';
}else{if(I.toLowerCase()!="classid"){F+=" "+I+'="'+E[I]+'"';
}}}}}var H="";
for(var J in G){if(G[J]!=Object.prototype[J]){H+='<param name="'+J+'" value="'+G[J]+'" />';
}}A.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+F+">"+H+"</object>";
AG[AG.length]=E.id;
D=Ar(E.id);
}else{var B=AR(Ac);
B.setAttribute("type",Ad);
for(var K in E){if(E[K]!=Object.prototype[K]){if(K.toLowerCase()=="styleclass"){B.setAttribute("class",E[K]);
}else{if(K.toLowerCase()!="classid"){B.setAttribute(K,E[K]);
}}}}for(var L in G){if(G[L]!=Object.prototype[L]&&L.toLowerCase()!="movie"){Ap(B,L,G[L]);
}}A.parentNode.replaceChild(B,A);
D=B;
}}return D;
}function Ap(B,D,C){var A=AR("param");
A.setAttribute("name",D);
A.setAttribute("value",C);
B.appendChild(A);
}function AV(A){var B=Ar(A);
if(B&&B.nodeName=="OBJECT"){if(AH.ie&&AH.win){B.style.display="none";
(function(){if(B.readyState==4){As(A);
}else{setTimeout(arguments.callee,10);
}})();
}else{B.parentNode.removeChild(B);
}}}function As(A){var B=Ar(A);
if(B){for(var C in B){if(typeof B[C]=="function"){B[C]=null;
}}B.parentNode.removeChild(B);
}}function Ar(A){var C=null;
try{C=Ak.getElementById(A);
}catch(B){}return C;
}function AR(A){return Ak.createElement(A);
}function Al(A,C,B){A.attachEvent(C,B);
AL[AL.length]=[A,C,B];
}function AO(A){var B=AH.pv,C=A.split(".");
C[0]=parseInt(C[0],10);
C[1]=parseInt(C[1],10)||0;
C[2]=parseInt(C[2],10)||0;
return(B[0]>C[0]||(B[0]==C[0]&&B[1]>C[1])||(B[0]==C[0]&&B[1]==C[1]&&B[2]>=C[2]))?true:false;
}function AY(B,F,A,C){if(AH.ie&&AH.mac){return ;
}var E=Ak.getElementsByTagName("head")[0];
if(!E){return ;
}var G=(A&&typeof A=="string")?A:"screen";
if(C){Ag=null;
AN=null;
}if(!Ag||AN!=G){var D=AR("style");
D.setAttribute("type","text/css");
D.setAttribute("media",G);
Ag=E.appendChild(D);
if(AH.ie&&AH.win&&typeof Ak.styleSheets!=AQ&&Ak.styleSheets.length>0){Ag=Ak.styleSheets[Ak.styleSheets.length-1];
}AN=G;
}if(AH.ie&&AH.win){if(Ag&&typeof Ag.addRule==Ac){Ag.addRule(B,F);
}}else{if(Ag&&typeof Ak.createTextNode!=AQ){Ag.appendChild(Ak.createTextNode(B+" {"+F+"}"));
}}}function AX(A,C){if(!Ah){return ;
}var B=C?"visible":"hidden";
if(AK&&Ar(A)){Ar(A).style.visibility=B;
}else{AY("#"+A,"visibility:"+B);
}}function AI(B){var A=/[\\\"<>\.;]/;
var C=A.exec(B)!=null;
return C&&typeof encodeURIComponent!=AQ?encodeURIComponent(B):B;
}var Aq=function(){if(AH.ie&&AH.win){window.attachEvent("onunload",function(){var A=AL.length;
for(var B=0;
B<A;
B++){AL[B][0].detachEvent(AL[B][1],AL[B][2]);
}var D=AG.length;
for(var C=0;
C<D;
C++){AV(AG[C]);
}for(var E in AH){AH[E]=null;
}AH=null;
for(var F in swfobject){swfobject[F]=null;
}swfobject=null;
});
}}();
return{registerObject:function(A,E,C,B){if(AH.w3&&A&&E){var D={};
D.id=A;
D.swfVersion=E;
D.expressInstall=C;
D.callbackFn=B;
Af[Af.length]=D;
AX(A,false);
}else{if(B){B({success:false,id:A});
}}},getObjectById:function(A){if(AH.w3){return AU(A);
}},embedSWF:function(K,E,H,F,C,A,B,I,G,J){var D={success:false,id:E};
if(AH.w3&&!(AH.wk&&AH.wk<312)&&K&&E&&H&&F&&C){AX(E,false);
AJ(function(){H+="";
F+="";
var Q={};
if(G&&typeof G===Ac){for(var O in G){Q[O]=G[O];
}}Q.data=K;
Q.width=H;
Q.height=F;
var N={};
if(I&&typeof I===Ac){for(var P in I){N[P]=I[P];
}}if(B&&typeof B===Ac){for(var L in B){if(typeof N.flashvars!=AQ){N.flashvars+="&"+L+"="+B[L];
}else{N.flashvars=L+"="+B[L];
}}}if(AO(C)){var M=AZ(Q,N,E);
if(Q.id==E){AX(E,true);
}D.success=true;
D.ref=M;
}else{if(A&&AT()){Q.data=A;
AE(Q,N,E,J);
return ;
}else{AX(E,true);
}}if(J){J(D);
}});
}else{if(J){J(D);
}}},switchOffAutoHideShow:function(){Ah=false;
},ua:AH,getFlashPlayerVersion:function(){return{major:AH.pv[0],minor:AH.pv[1],release:AH.pv[2]};
},hasFlashPlayerVersion:AO,createSWF:function(A,B,C){if(AH.w3){return AZ(A,B,C);
}else{return undefined;
}},showExpressInstall:function(B,A,D,C){if(AH.w3&&AT()){AE(B,A,D,C);
}},removeSWF:function(A){if(AH.w3){AV(A);
}},createCSS:function(B,A,C,D){if(AH.w3){AY(B,A,C,D);
}},addDomLoadEvent:AJ,addLoadEvent:Ab,getQueryParamValue:function(B){var A=Ak.location.search||Ak.location.hash;
if(A){if(/\?/.test(A)){A=A.split("?")[1];
}if(B==null){return AI(A);
}var C=A.split("&");
for(var D=0;
D<C.length;
D++){if(C[D].substring(0,C[D].indexOf("="))==B){return AI(C[D].substring((C[D].indexOf("=")+1)));
}}}return"";
},expressInstallCallback:function(){if(At){var A=Ar(AC);
if(A&&Ai){A.parentNode.replaceChild(Ai,A);
if(AD){AX(AD,true);
if(AH.ie&&AH.win){Ai.style.display="block";
}}if(AP){AP(AS);
}}At=false;
}}};
}();
