<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=yes">

    <title>Plot-It</title>

    <!-- Static datasets -->
    <link href="transformers/cache/multimedia.json" type="application/json" rel="cwrc/data"/>
    <link href="transformers/cache/biblifo.json" type="application/json" rel="cwrc/data"/>
    <link href="transformers/cache/lglc.json" type="application/json" rel="cwrc/data"/>
    <link href="transformers/cache/orlando.json" type="application/json" rel="cwrc/data"/>

    <!-- Customizations -->
    <link href="assets/styles/cwrc.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/filters/text_filter.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/filters/date_filter.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/filters/checklist_filter.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/filters/filter_reset.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/switcher.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/spotlight.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/map.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/grid.css" type="text/css" rel="stylesheet"/>
    <link href="assets/styles/components/timeline.css" type="text/css" rel="stylesheet"/>

    <!-- Libraries -->
    <script src="assets/javascripts/lib/knockout-3.3.0.js" type="text/javascript"></script>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src="assets/javascripts/lib/spiderfy.min.js" type="text/javascript"></script>

    <link href="assets/javascripts/lib/noUiSlider.8.0.2/nouislider.min.css" rel="stylesheet">
    <script src="assets/javascripts/lib/noUiSlider.8.0.2/nouislider.min.js" type="text/javascript"></script>

    <script src="assets/javascripts/network.js" type="text/javascript"></script>
    <script src="assets/javascripts/transform.js" type="text/javascript"></script>
    <script src="assets/javascripts/cwrc_ko.js" type="text/javascript"></script>

    <!-- KO components -->
    <script src="assets/javascripts/components/filters/text_filter.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/filters/date_filter.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/filters/checklist_filter.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/filters/filter_reset.js" type="text/javascript"
            rel="stylesheet"></script>
    <script src="assets/javascripts/components/switcher.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/spotlight.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/timeline.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/map.js" type="text/javascript"></script>
    <script src="assets/javascripts/components/grid.js" type="text/javascript"></script>
</head>
<body>
<section id="sidebar">
    <header>
        <a href="/">Plot-It</a>
    </header>

    <section>
        <div id="filters">
            <text_filter params="label: 'Search', placeholder: 'eg. Rocky Mountains'"></text_filter>

            <date_filter params="label: 'Date Range'"></date_filter>


            <checklist_filter params="label: 'Collection', field: 'group'"></checklist_filter>
            <checklist_filter params="label: 'Event Type', field: 'eventType'"></checklist_filter>
        </div>

        <hr/>

        <filter_reset params="label: 'Reset All', filterGroupId: 'filters'"></filter_reset>
    </section>

    <section>
        <header>How to use search</header>
        <p>
            Search below by choosing a facet or typing keywords. To restart your search, click on "Reset all Filters"
            above the map.
        </p>
    </section>
</section>

<main>
    <timeline></timeline>

    <spotlight></spotlight>

    <style>
        .grid-Start, .grid-End {
            white-space: nowrap;
        }
    </style>
    <switcher></switcher>
</main>


<!--
===============================================
               Widget Templates
===============================================
-->
<div id="templates" style="display:none;">

    <!--
    ===============================================
                      Grid
    ===============================================
    -->
    <template id="grid-template">
        <div id="gridSorting">
            Sort <span data-bind="visible: sortContexts().length > 0">by</span>
            <!-- Building a "widget" for editing each sorting context-->
            <div data-bind="foreach: sortContexts">
                <div>
                    <select data-bind="options: $parent.allFields, optionsText: 'name', optionsValue: 'name', optionsCaption:'Choose...', value: $data.name"></select>
                    <a href="#"
                       data-bind="click: function() { $data.reverse() }, text: $data.getFieldDirectionLabel()"></a>
                    <a href="#" data-bind="click: function() { $parent.removeSortBy($data) }">x</a>
                </div>

            </div>

            <a href="#" title="Add Sorting Rule" data-bind="click: addContext ">by...</a>
        </div>

        <table>
            <!-- explicit thead & tbody are important, otherwise the browser assumes incorrect things-->
            <thead>
            <tr>
                <th></th>
                <!-- ko foreach: Object.keys(columns) -->
                <th data-bind="text: $data">
                </th>
                <!-- /ko -->
            </tr>
            </thead>
            <tbody data-bind="foreach: {data: itemsOnCurrentPage, as: 'item'}">
            <tr data-bind="">
                <td>
                    <a href="#" data-bind="click: function(){ CWRC.selected(item)}">
                        Select
                    </a>
                </td>

                <!-- ko foreach: {data: Object.keys($parent.columns), as: 'columnLabel'} -->
                <td data-bind="html: item[$parents[1].columns[columnLabel]] || 'n/a', css: $parents[1].getColumnClass(columnLabel)">
                </td>
                <!-- /ko -->
            </tr>
            </tbody>
        </table>

        <section>
           <span data-bind="visible: isFarAway(1)">
                <a href="#"
                   data-bind="text: 1, click: function(){ setPage(1) }, attr: {selected: currentPageIndex() == 1}"></a>
                <span data-bind="visible: isFarAway(2)">
                    ...
                </span>
           </span>
           <span data-bind="foreach: pageNeighbourhood">
                <a href="#"
                   data-bind="text: $data, click: function(){ $parent.setPage($data) }, attr: {selected: $parent.currentPageIndex() == $data}"></a>
           </span>
           <span data-bind="visible: isFarAway(maxPageIndex())">
                <span data-bind="visible: isFarAway(maxPageIndex() - 1)">
                    ...
                </span>
                <a href="#"
                   data-bind="text: maxPageIndex, click: function(){ setPage(maxPageIndex()) }, attr: {selected: currentPageIndex() == maxPageIndex()}"></a>
           </span>
        </section>
    </template>

    <!--
    ===============================================
                      
    ===============================================
    -->
</div>
</body>
</html>